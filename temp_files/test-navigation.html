<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Тест навигации по заголовкам</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			line-height: 1.6;
			margin: 0;
			padding: 20px;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			gap: 40px;
		}

		.navigation {
			width: 300px;
			position: sticky;
			top: 20px;
			height: fit-content;
			background: #f5f5f5;
			padding: 20px;
			border-radius: 10px;
		}

		.content {
			flex: 1;
		}

		.page-blog-detail__navigation-link {
			display: block;
			padding: 10px;
			margin: 5px 0;
			text-decoration: none;
			color: #333;
			border-radius: 5px;
			transition: all 0.3s ease;
		}

		.page-blog-detail__navigation-link:hover {
			background: #e0e0e0;
		}

		.page-blog-detail__navigation-link.is-active {
			background: #5B61FF;
			color: white;
		}

		h2,
		h3,
		h4 {
			margin-top: 60px;
			padding-top: 20px;
			border-top: 2px solid #5B61FF;
		}

		.section {
			margin: 40px 0;
			padding: 20px;
			background: #f9f9f9;
			border-radius: 10px;
		}
	</style>
</head>

<body>
	<div class="container">
		<!-- Навигация -->
		<aside class="navigation">
			<h2>Навигация по статье</h2>
			<ul>
				<li><a href="#heading-1" class="page-blog-detail__navigation-link">1. Первый заголовок</a></li>
				<li><a href="#heading-2" class="page-blog-detail__navigation-link">2. Второй заголовок</a></li>
				<li><a href="#heading-3" class="page-blog-detail__navigation-link">3. Третий заголовок</a></li>
				<li><a href="#heading-4" class="page-blog-detail__navigation-link">4. Четвертый заголовок</a></li>
			</ul>
		</aside>

		<!-- Контент -->
		<div class="content">
			<h1>Тестовая статья</h1>

			<div class="section">
				<h2 id="heading-1">Первый заголовок</h2>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore
					et dolore magna aliqua.</p>
				<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat.</p>
			</div>

			<div class="section">
				<h2 id="heading-2">Второй заголовок</h2>
				<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
					pariatur.</p>
				<p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est
					laborum.</p>
			</div>

			<div class="section">
				<h3 id="heading-3">Третий заголовок</h3>
				<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
				<p>Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta
					sunt explicabo.</p>
			</div>

			<div class="section">
				<h4 id="heading-4">Четвертый заголовок</h4>
				<p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur
					magni dolores.</p>
				<p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit.</p>
			</div>

			<!-- Дополнительный контент для прокрутки -->
			<div
				style="height: 1000px; background: linear-gradient(to bottom, #f0f0f0, #e0e0e0); display: flex; align-items: center; justify-content: center; margin: 40px 0;">
				<h2>Дополнительный контент для прокрутки</h2>
			</div>
		</div>
	</div>

	<script>
		// Простая версия навигации для тестирования
		document.addEventListener('DOMContentLoaded', function () {
			console.log('Тест навигации загружен');

			const navigationLinks = document.querySelectorAll('.page-blog-detail__navigation-link');
			const headings = document.querySelectorAll('h2[id], h3[id], h4[id]');

			console.log('Найдено ссылок:', navigationLinks.length);
			console.log('Найдено заголовков:', headings.length);

			// Обработчики кликов
			navigationLinks.forEach(link => {
				link.addEventListener('click', function (e) {
					e.preventDefault();
					console.log('Клик по ссылке:', this.href);

					const targetId = this.getAttribute('href').substring(1);
					const targetElement = document.getElementById(targetId);

					if (targetElement) {
						console.log('Найден элемент:', targetId);
						targetElement.scrollIntoView({
							behavior: 'smooth',
							block: 'start'
						});
					} else {
						console.error('Элемент не найден:', targetId);
					}
				});
			});

			// Обновление активного состояния при прокрутке
			function updateActiveNavigation() {
				const scrollPosition = window.scrollY + 100;

				let activeHeading = null;
				let minDistance = Infinity;

				headings.forEach(heading => {
					const rect = heading.getBoundingClientRect();
					const distance = Math.abs(rect.top);

					if (distance < minDistance && rect.top <= 100) {
						minDistance = distance;
						activeHeading = heading;
					}
				});

				// Убираем активный класс
				navigationLinks.forEach(link => {
					link.classList.remove('is-active');
				});

				// Добавляем активный класс
				if (activeHeading) {
					const activeId = activeHeading.id;
					const activeLink = document.querySelector(`.page-blog-detail__navigation-link[href="#${activeId}"]`);
					if (activeLink) {
						activeLink.classList.add('is-active');
					}
				}
			}

			// Обработчик прокрутки
			window.addEventListener('scroll', function () {
				requestAnimationFrame(updateActiveNavigation);
			});

			// Инициализация
			updateActiveNavigation();
		});
	</script>
</body>

</html>