<? namespace Bitrix\Main;$GLOBALS['____1097875291']= array(base64_decode('Zml'.'sZ'.'V9leGlz'.'dHM'.'='),base64_decode('c3Ry'.'dG9'.'1cHBlcg='.'='),base64_decode('bWQ1'),base64_decode(''.'bWQ1'),base64_decode('aW5'.'fYX'.'Jy'.'Y'.'Xk='),base64_decode('a'.'W5fYXJyYX'.'k'.'='),base64_decode('ZGVma'.'W5'.'l'.'ZA='.'='),base64_decode('Z'.'GVma'.'W5l'.'ZA=='),base64_decode('ZG'.'VmaW5lZA=='),base64_decode('ZmlsZV9'.'leG'.'lz'.'d'.'H'.'M='),base64_decode('Zml'.'sZV9leGlzd'.'H'.'M='),base64_decode('ZmlsZV'.'9'.'leGl'.'zdHM='),base64_decode('ZmlsZV9l'.'eG'.'lzdHM='),base64_decode('Z'.'Xh'.'wbG'.'9kZ'.'Q=='));if(!function_exists(__NAMESPACE__.'\\___1317902840')){function ___1317902840($_1823050489){static $_1688161554= false; if($_1688161554 == false) $_1688161554=array('L2Jpd'.'HJpeC9saWN'.'lbnNlX2tleS5w'.'a'.'HA'.'=','','','RE'.'VNTw==','REVN'.'Tw'.'==','QklUUklY','TElD'.'RU5DRQ==','R'.'EVNTw==','L2t'.'leV9'.'1cGRhdGUucGhwP'.'2xpY'.'2Vu'.'c2'.'Vf'.'a2'.'V'.'5P'.'Q==','JnRvYm'.'Fz'.'a2V0PXkmbGFuZ'.'z0=','aHR0cHM6Ly9kZXYu'.'MWMtYml0cml4LnJ1L'.'2x'.'lYX'.'JuaW5nL2NvdXJ'.'zZ'.'S'.'9pbmR'.'leC5w'.'aHA'.'/Q'.'09V'.'U'.'l'.'NFX0'.'lEPTE'.'zNSZMRVNTT05fSU'.'Q9'.'MjU3Mj'.'A=','aH'.'R'.'0cH'.'M6L'.'y90cmF'.'pbm'.'lu'.'Z'.'y5'.'iaXRyaXgyNC5jb20vc3Vwc'.'G9ydC90cmF'.'pb'.'mluZy'.'9j'.'b3Vyc2UvaW5'.'kZXgucGhwP0'.'NPV'.'VJT'.'R'.'V9JRD0'.'xNzgmT'.'EVTU09OX0'.'l'.'EPTI'.'1O'.'T'.'M'.'y'.'JkxFU1N'.'PTl9QQ'.'VRIPTE3NTIwLjE3NTYy'.'L'.'jI1OTMwL'.'jI1OTMy','cnU=','Ynk=','a3'.'o=','ZGU=','ZXU=','Z'.'nI=','cGw=',''.'aXQ=','dWs=','Z'.'X'.'U=','Y'.'2'.'9'.'t',''.'Z'.'W4=','R'.'EVNTw'.'==','WQ'.'==','VElNRUxJTUl'.'UX0VESV'.'R'.'JT0'.'4=','WQ==','R'.'U5DT0RF','WQ='.'=','U2l'.'0ZUV4c'.'GlyZURhdGU=','bWF'.'pbg==','fnN1cHBvcnRf'.'Z'.'mluaXNoX2RhdGU=','WS1tLWQ'.'=','WS1tLWQ'.'=',''.'Yml0cm'.'l4MjQ=','b'.'WFpbg'.'==','fl'.'BBUk'.'FNX0'.'NMSUVO'.'VF9MQ'.'U5'.'H','','a'.'W50'.'c'.'mFuZXQ'.'=','ZW'.'4=','cnU'.'=',''.'bW'.'Fpbg='.'=','dmV'.'uZG'.'9'.'y','Yml0cml'.'4X3BvcnRhbA==',''.'Yml'.'0cml4','ZW'.'4=','M'.'WNf'.'Yml0'.'c'.'m'.'l4X3B'.'vcnRhbA'.'='.'=',''.'MWNfYml'.'0'.'cml4','cnU=','L'.'2Jpd'.'HJpe'.'C9tb2R'.'1bGVzL21ha'.'W4'.'vbGFuZy91'.'YQ==',''.'d'.'W'.'E=','L2Jpd'.'HJpe'.'C9tb2R'.'1bG'.'VzL21haW4vbGF'.'u'.'Zy9i'.'eQ==','Yn'.'k=',''.'L2'.'JpdHJpe'.'C'.'9tb2R1bG'.'Vz'.'L2'.'1haW4v'.'b'.'GF'.'u'.'Zy9reg==','a3o=','L'.'2J'.'pdHJpeC'.'9tb'.'2R1bGVz'.'L'.'21h'.'aW4vb'.'GFuZy9'.'yd'.'Q='.'=','cnU=',''.'bWFpb'.'g==','flBBU'.'kFNX1'.'BBUlRORVJf'.'SUQ=','bWFpbg==','UEFSQ'.'U1'.'fTU'.'FYX1'.'VTRVJT','b'.'WFpbg==','fkNP'.'VU5'.'U'.'X0VYVFJB',''.'Tg==','W'.'Q==','ZXh'.'0cmF'.'uZX'.'Q=',''.'QU5'.'EIFUuTEFTVF9'.'M'.'T0d'.'JT'.'iA+IA==','Q'.'U5E'.'IFUuT'.'EF'.'T'.'VF9MT0'.'dJTiBJUyBOT1QgTlV'.'MT'.'A==',''.'aW50c'.'mF'.'u'.'ZXQ=','ZXh0cm'.'FuZXQ=','ZXh0c'.'mF'.'uZX'.'RfZ3'.'JvdX'.'A'.'=','bWFpbg==',''.'fmx'.'pY2'.'Vuc2'.'VfbmFtZ'.'Q'.'==','bWF'.'pb'.'g==','fmx'.'pY2Vuc2V'.'fY'.'29kZXM=','','LA='.'=');return base64_decode($_1688161554[$_1823050489]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1483309506= null; private?string $_335746420= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_1483309506 === null){ $_830532199= Loader::getDocumentRoot(). ___1317902840(0); $LICENSE_KEY= ___1317902840(1); if($GLOBALS['____1097875291'][0]($_830532199)){ include($_830532199);} $this->_1483309506=($LICENSE_KEY == ___1317902840(2) || $GLOBALS['____1097875291'][1]($LICENSE_KEY) == ___1317902840(3)? ___1317902840(4): $LICENSE_KEY);} return $this->_1483309506;} public function getHashLicenseKey(): string{ return $GLOBALS['____1097875291'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1097875291'][3](___1317902840(5). $this->getKey(). ___1317902840(6));} public function isDemoKey(): bool{ return $this->getKey() == ___1317902840(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___1317902840(8). $this->getHashLicenseKey(). ___1317902840(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___1317902840(10);} return ___1317902840(11);} public function getRenewalLink(): string{ $_335746420= $this->getRegion(); if($GLOBALS['____1097875291'][4]($_335746420,[___1317902840(12), ___1317902840(13), ___1317902840(14), ___1317902840(15)])){ return self::URL_RENEWAL_LICENSE[$_335746420];} if($GLOBALS['____1097875291'][5]($_335746420,[___1317902840(16), ___1317902840(17), ___1317902840(18), ___1317902840(19), ___1317902840(20)])){ return self::URL_RENEWAL_LICENSE[___1317902840(21)];} return self::URL_RENEWAL_LICENSE[___1317902840(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1317902840(23)];} public function isDemo(): bool{ return $GLOBALS['____1097875291'][6](___1317902840(24)) && DEMO === ___1317902840(25);} public function isTimeBound(): bool{ return $GLOBALS['____1097875291'][7](___1317902840(26)) && TIMELIMIT_EDITION === ___1317902840(27);} public function isEncoded(): bool{ return $GLOBALS['____1097875291'][8](___1317902840(28)) && ENCODE === ___1317902840(29);} public function getExpireDate():?Date{ $_288889356= (int)($GLOBALS[___1317902840(30)] ??(130*2-260)); if($_288889356> min(168,0,56)){ return Date::createFromTimestamp($_288889356);} return null;} public function getSupportExpireDate():?Date{ $_288889356= Option::get(___1317902840(31), ___1317902840(32)); if(Date::isCorrect($_288889356, ___1317902840(33))){ return new Date($_288889356, ___1317902840(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_335746420 === null){ if(Loader::includeModule(___1317902840(35))){ $this->_335746420= \CBitrix24::getPortalZone();} else{ $_335746420= Option::get(___1317902840(36), ___1317902840(37)); if(empty($_335746420)){ $_335746420= $this->__99852441(); if(empty($_335746420)){ $_335746420= $this->__814974353();}} $this->_335746420= $_335746420 ?? ___1317902840(38);}} return $this->_335746420?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___1317902840(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1317902840(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1317902840(41)];} private function __99852441():?string{ $_600600027= Option::get(___1317902840(42), ___1317902840(43)); if($_600600027 === ___1317902840(44) || $_600600027 === ___1317902840(45)){ return ___1317902840(46);} if($_600600027 === ___1317902840(47) || $_600600027 === ___1317902840(48)){ return ___1317902840(49);} return null;} private function __814974353():?string{ $_284170957= Application::getDocumentRoot(); if($GLOBALS['____1097875291'][9]($_284170957. ___1317902840(50))){ return ___1317902840(51);} if($GLOBALS['____1097875291'][10]($_284170957. ___1317902840(52))){ return ___1317902840(53);} if($GLOBALS['____1097875291'][11]($_284170957. ___1317902840(54))){ return ___1317902840(55);} if($GLOBALS['____1097875291'][12]($_284170957. ___1317902840(56))){ return ___1317902840(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___1317902840(58), ___1317902840(59),(242*2-484));} public function getMaxUsers(): int{ return (int)Option::get(___1317902840(60), ___1317902840(61),(1108/2-554));} public function isExtraCountable(): bool{ return Option::get(___1317902840(62), ___1317902840(63), ___1317902840(64)) === ___1317902840(65) && ModuleManager::isModuleInstalled(___1317902840(66));} public function getActiveUsersCount(Date $_857820955= null): int{ $_1338162357= Application::getConnection(); $_1225629756=(1344/2-672); if($_857820955 !== null){  $_467706711= ___1317902840(67).$_1338162357->getSqlHelper()->convertToDbDate($_857820955);} else{  $_467706711= ___1317902840(68);} if(ModuleManager::isModuleInstalled(___1317902840(69))){ $_1100647489="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_467706711}
			"; $_1225629756= (int)$_1338162357->queryScalar($_1100647489); $_1261782974= (int)Option::get(___1317902840(70), ___1317902840(71)); if($_1261782974>(816-2*408) && $this->isExtraCountable()){ $_1100647489="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1261782974}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_467706711}
							AND D.VALUE_ID IS NULL
					"; $_1225629756 += (int)$_1338162357->queryScalar($_1100647489);}} return $_1225629756;}  public function getName(): string{ return Option::get(___1317902840(72), ___1317902840(73));}  public function getCodes(): array{ $_244346100= Option::get(___1317902840(74), ___1317902840(75)); if($_244346100 != ___1317902840(76)){ return $GLOBALS['____1097875291'][13](___1317902840(77), $_244346100);} return[];}}?>